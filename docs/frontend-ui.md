# frontend-ui.md
## 项目概述

此文档为网页版生产力工具 **Thinking-Calendar** 的前端 UI 设计规范。聚焦工作场景下的零碎记录自动化聚合问题。

核心功能：
- 每天只写工作记录
- AI 一键生成周报/月报，用户可修改、确认、复制、导出
- 年终总结独立生成，只基于已确认的周报和月报
- 月看板：一眼看出本月哪些天没写，点击立刻补
- 历史报告常驻左侧，随时回顾

设计原则：
- 极简黑白冷调（只用 gray 系列）
- 左侧固定导航 + 右侧内容区
- 所有编辑都用弹窗完成，不跳转页面
- 无任何彩色、无图表、无激励横幅、无单日报告按钮
- 响应式设计，移动端友好

## 技术栈

- TypeScript + Next.js 14 (App Router)
- shadcn/ui + Tailwind CSS
- Zustand + @tiptap/react + react-markdown
- axios + msw (mock)
- lucide-react + date-fns + react-hot-toast + next-auth

## 项目结构

```
src/
├── app/
│   ├── layout.tsx
│   ├── page.tsx               # 登录页
│   ├── today/page.tsx
│   ├── history/page.tsx
│   ├── dashboard/page.tsx     # 月看板
│   └── reports/page.tsx
├── components/
│   ├── ui/                    # shadcn 组件
│   ├── Editor.tsx
│   ├── ReportViewer.tsx
│   └── Sidebar.tsx            # 左侧导航（含最近报告）
├── lib/
│   ├── api.ts
│   └── utils.ts
├── stores/
│   ├── useAuthStore.ts
│   ├── useLogStore.ts
│   └── useReportStore.ts
├── types/
│   └── index.ts
├── mock/
│   ├── handlers.ts
│   └── data.json
└── globals.css
```

## 全局样式和强制颜色

- 只允许使用以下 7 个颜色：
  gray-50（页面背景）、gray-100（卡片背景）、gray-200（边框和 hover）、gray-300（次要文字）、gray-700（正文）、gray-800（标题）、gray-900（深色底）
- 暗黑模式：自动支持，使用 dark: 前缀
- 圆角：卡片 16px，按钮 12px
- 所有 hover：shadow-md + scale-105 + transition-all duration-200
- 字体：system-ui，text-base (16px)
- 左侧导航栏：固定宽度 280px
- 右侧内容区：margin-left 280px，padding 32px，max-width 1400px，居中

## API 和 Mock

mock/data.json 示例（请确保有 60 天数据）：
```json
{
  "logs": [ /* 60 条工作记录 */ ],
  "reports": [
    {"id":"1","period":"week","startDate":"2025-12-02","endDate":"2025-12-08","title":"第49周周报","content":"# 周报\n...","confirmed":true,"createdAt":"2025-12-08T22:00:00Z"},
    {"id":"2","period":"week","startDate":"2025-12-09","endDate":"2025-12-15","title":"第50周周报","content":"# 周报\n...","confirmed":false,"createdAt":"2025-12-11T10:00:00Z"},
    {"id":"3","period":"month","startDate":"2025-11-01","endDate":"2025-11-30","title":"2025年11月月报","content":"# 月报\n...","confirmed":true,"createdAt":"2025-11-30T22:00:00Z"}
  ]
}
```

## 页面设计

### 1. 登录页（/）
全屏居中卡片，背景 gray-50 / gray-950
卡片宽度 400px，圆角 24px，内边距 48px
内容：大标题 “Thinking-Calendar” (text-3xl font-bold gray-900)
小标题 “专注工作记录，AI 帮你写周报” (text-gray-600)
输入：用户名输入框 + 密码输入框
按钮：单一“登录 / 注册”黑色按钮（全宽，白色文字，点击后若用户不存在视为注册，存在则登录；hover 轻微缩放 1.02x）
前端校验：用户名 3-20 字符，密码 6-32 字符，空值或越界直接 Toast 阻断请求

### 2. 全局布局（layout.tsx）—— 原型图
```text
桌面端（≥1024px）：
┌────────────────────┬────────────────────────────────────────────────────────────┐
│ 左侧固定导航栏     │                        右侧内容区                          │
│ 宽度：280px        │ ml-280 p-8 max-w-1400px mx-auto                            │
│ bg-gray-100        │ bg-white dark:bg-gray-950                                 │
│                    │                                                           │
│ Thinking Calendar  │                                                           │
│                    │                                                           │
│ 今天               │                                                           │
│ 历史               │                                                           │
│ 看板               │                                                           │
│ 报告               │                                                           │
│                    │                                                           │
│ 右上角：头像圆形按钮，点击展开用户菜单（显示用户名 + 退出登录）                 │
│                    │                                                           │
│ ────────────────── │                                                           │
│ 最近报告           │                                                           │
│ 第50周周报 Dec 9-15│                                                           │
│ 2025年11月月报 Nov │                                                           │
│ 第49周周报 Dec 2-8 │                                                           │
│ …… 查看全部 →     │                                                           │
└────────────────────┴────────────────────────────────────────────────────────────┘

移动端：左侧栏隐藏，顶部出现汉堡菜单，点击弹出 Drawer
```

### 3. 今天页（/today）—— 原型图
```text
右侧内容区：
┌─────────────────────────────────────────────────────────────────────────────┐
│ 今天 · 2025年12月11日 星期四                           ← text-3xl font-semibold │
│                                                                             │
│ ┌─────────────────────────────────────────────────────────────────────────┐ │
│ │                         Tiptap 编辑器                                   │ │
│ │ 高度：calc(100vh - 220px)                                               │ │
│ │ 边框：border border-gray-200 rounded-xl                                 │ │
│ │ 工具栏：Bold / Italic / Bullet List / Ordered List / H2 / H3 图标按钮   │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│ 右下角悬浮保存按钮：编辑器容器内 absolute bottom-24 right-24，黑底白字，hover 轻微缩放 │
│ 功能：仅保存当前编辑内容（无“生成本周报告”按钮）                            │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 4. 历史记录页（/history）—— 原型图
```text
右侧内容区：
┌─────────────────────────────────────────────────────────────────────────────┐
│ 历史记录                                                                    │
│                                                                             │
│ ┌──────────────────────┬──────────────────────────────────────────────────┐ │
│ │ 左侧日历            │ 右侧日志卡片列表                                 │ │
│ │ 宽度：360px         │                                                  │ │
│ │ shadcn Calendar     │ 每张卡片：                                       │ │
│ │ 有记录日期：灰色圆点 │ ┌──────────────────────────────────────────────┐ │ │
│ │ 月份切换：月份导航为中文，切换月份右侧列表同步展示该月记录           │ │
│ │                     │ │ 2025年12月11日 星期四                        │ │ │
│ │                     │ │ 完成需求文档 v1.0 …                          │ │ │
│ │                     │ │ 18:30 更新          [ 编辑 ]                │ │ │
│ │                     │ └──────────────────────────────────────────────┘ │ │
│ └──────────────────────┴──────────────────────────────────────────────────┘ │
│                                                                             │
│ 点击日历任意日期 → 弹出 Dialog（宽度 90vw，max 1000px）内嵌完整 Tiptap 编辑器 │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 5. 月记录看板页（/dashboard）—— 原型图
```text
右侧内容区：
┌─────────────────────────────────────────────────────────────────────────────┐
│ 2025年12月记录看板                                                          │
│ 本月已记录 18 天　未记录 13 天　记录率 58%                                 │
│                                                                             │
│ ┌─────────────────────────────────────────────────────────────────────────┐ │
│ │                       大 Calendar（占满剩余空间）                       │ │
│ │ 已记录日期：背景 gray-800，文字 white，圆角 8px                         │ │
│ │ 未记录日期：背景 gray-100，hover 背景 red-100 + 文字 red-600 + “点击补充” │ │
│ │ 今天：边框 4px solid gray-900                                           │ │
│ │ 整体卡片 hover 仅阴影，无缩放；格子 hover 无缩放，仅保留阴影/背景提示   │ │
│ │ 未来日期不可编辑，点击提示“不能编辑未来日期的日志”                      │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│ 点击任意日期 → 弹出 Dialog 编辑器快速补记录                                 │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 6. 报告页（/reports）—— 原型图
```text
右侧内容区（左右分栏，间距 32px）：
┌────────────────────────────┬──────────────────────────────────────────────────┐
│ 左侧：历史报告列表         │ 右侧：报告生成与编辑区                           │
│ 宽度：380px                │                                                  │
│ shadcn Accordion           │ ┌──────────────────────────────────────────────┐ │
│ ▸ 周报（默认展开最近10条） │ │ 报告类型   [ 周报 ∨ ]                        │ │
│ ▸ 月报                     │ │ 版式       [ 正式版 ∨ ]  [ 简约版 ∨ ]        │ │
│ ▸ 年报                     │ │ 时间范围   周报/周选单日自动整周；月报整月；年报固定整年 │ │
│                            │ │                                          │ │
│ 每条卡片：                 │ │   [ 立即生成 ] → 同参数二次为“重新生成”（仅更新内容） │ │
│ 2025年12月09日-12月15日 周报 │ └──────────────────────────────────────────────┘ │
│ 已确认                     │                                                  │
│ 2025-12-11 10:00 创建     │ 生成后右侧显示：                                 │
│                            │ ┌────────────────────────────────────────────┐ │
│                            │ │ Tiptap 可编辑报告区                        │ │
│                            │ └────────────────────────────────────────────┘ │
│                            │ [ 复制 ] [ 导出 PDF ] [ 确认报告 ]          │
 └────────────────────────────┴──────────────────────────────────────────────────┘
```

交互补充：
- 周报、月报时间选择只允许今天及以前的日期，未来日期置灰不可选；周报选单日自动计算周一-周日范围，月报自动整月；年报固定整年不可自选时间。
- 生成按钮逻辑：同一报告类型+版式+时间范围首次点击为“立即生成”，之后显示“重新生成”，仅更新当前报告内容，不新增条目；切换任一选项后恢复为“立即生成”。
- 报告页卡片蒙版 hover 仅阴影无缩放，列表项交互保持原有设计。
- 周报标题按所选日期的真实周序（ISO 周）生成，补历史周报仍按周序排序；同一周期生成时覆盖原条目不新增。
- 左侧导航精简为主菜单，移除“最近报告”快捷入口，报告相关信息集中在报告页。
- 报告列表卡片：状态以灰阶圆角标签展示（已确认/未确认更明显），底部时间文案显示“最近更新：yyyy-MM-dd HH:mm”。
- 生成体验：点击“立即生成/重新生成”后按钮显示旋转图标，提示“AI 正在生成”；约 1 秒后开始打字机式逐字出现内容，直至生成结束。

## 精确尺寸与强制要求

- 左侧导航栏：width: 280px（固定）
- 右侧内容区：margin-left: 280px
- 编辑器最小高度：calc(100vh - 220px)
- Dialog 编辑器：90vw，max-width 1000px
- 卡片圆角：16px
- 按钮圆角：12px
- 所有间距：使用 4 的倍数（p-4, p-8, gap-6）
- 最近报告列表：显示 5 条，超过显示 “查看全部 →”
- 禁止出现任何蓝色、绿色、紫色、红色（除未记录 hover 外）
- 禁止热力图、图表、激励横幅、生活标签、单日报告按钮
